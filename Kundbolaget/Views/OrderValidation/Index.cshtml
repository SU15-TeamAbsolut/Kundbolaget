@model Kundbolaget.Models.ViewModels.JsonOrderViewModel

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

Antal valideringsfel i JSON: @Model.ValidationErrors.Count
@if (Model.ValidationErrors.Count > 0)
{
  foreach (var error in Model.ValidationErrors)
  {
    @error.Kind
  }
}
<h2>Ny order</h2>


<ul>
  <li><strong>Kund:</strong> @Model.Order.Customer.Name</li>
  <li><strong>Faktureringsadress:</strong> @Model.Order.Customer.InvoiceAddress</li>
  <li><strong>Leveransadress:</strong> @Model.Order.ShippingAddress</li>
  @foreach (var orderRow in Model.Order.OrderRows)
  {
    <li><strong>Produkt:</strong> @orderRow.Product.Name, antal: @orderRow.AmountOrdered</li>
  }
</ul>

@if (!Model.OrderIsValid)
{
  <p>Fel i ordern: @Model.ErrorMessage</p>
}


@using (Html.BeginForm("PlaceOrder", "OrderValidation"))
{
    @Html.Hidden("order", Model)
    <input type="submit" value="Save" class="btn btn-default" />
}
